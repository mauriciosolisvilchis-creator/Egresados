{% extends 'base.html' %}
{% block title %}Egresados{% endblock %}
{% block content %}
<div class="mb-3">
  <div class="text-center mb-2">
    <h2 class="egresados-title">Egresados</h2>
  </div>

  <!-- Formulario de búsqueda y botón compactos -->
  <div class="search-container px-1 px-md-0 mx-auto mx-md-0">
    <form method="get" action="{{ url_for('egresados_list') }}" class="d-flex flex-column flex-md-row gap-2 w-100 align-items-md-center">
      <input name="q" class="form-control form-control-sm flex-md-grow-1" placeholder="Buscar..." value="{{ q|default('') }}" />
      <button class="btn btn-white btn-sm search-btn" type="submit">Buscar</button>
      <a class="btn btn-success btn-sm" href="{{ url_for('egresado_new') }}" style="white-space: nowrap;">+ Nuevo</a>
    </form>
  </div>
</div>

<!-- Tabla responsiva -->
<div class="full-width-wrapper">
  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th class="col-matricula">Matrícula</th>
          <th class="col-nombre">Nombre</th>
          <th class="col-carrera">Carrera</th>
          <th class="col-generacion">Generación</th>
          <th class="col-estatus">Estatus</th>
          <th class="col-domicilio">Domicilio</th>
          <th class="col-genero">Género</th>
          <th class="col-telefono">Teléfono</th>
          <th class="col-correo">Correo</th>
          <th class="col-acciones">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for e in egresados %}
        <tr>
          <td class="align-middle col-matricula">{{ e['matricula'] }}</td>
          <td class="align-middle col-nombre">{{ e['nombre_completo'] }}</td>
          <td class="align-middle col-carrera">{{ e['carrera'] }}</td>
          <td class="align-middle col-generacion">{{ e['generacion'] }}</td>
          <td class="align-middle col-estatus">{{ e['estatus'] }}</td>
          <td class="align-middle col-domicilio">{{ e['domicilio'] }}</td>
          <td class="align-middle col-genero">{{ e['genero'] }}</td>
          <td class="align-middle col-telefono">{{ e['telefono'] }}</td>
          <td class="align-middle col-correo">{{ e['correo_electronico'] }}</td>
          <td class="align-middle">
            <div class="d-flex flex-column gap-1">
              <a class="btn btn-sm btn-primary action-btn w-100" href="{{ url_for('egresado_edit', matricula=e['matricula']) }}">Editar</a>
              <form method="post" action="{{ url_for('egresado_delete', matricula=e['matricula']) }}" style="display:inline; width: 100%;" onsubmit="return confirm('¿Eliminar este egresado?')">
                <button class="btn btn-sm btn-danger action-btn w-100" type="submit">Eliminar</button>
              </form>
            </div>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="10" class="text-center">No hay registros.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}